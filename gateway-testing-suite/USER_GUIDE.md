# KahLuna WARP Mobile Testing Client - User Guide

## 📖 Overview

This mobile testing client is designed for **gateway administrators, developers, and support engineers** to validate VPN gateway functionality. It provides comprehensive testing tools to ensure your KahLuna WARP deployment works correctly before handing configurations to end users.

## 🎯 Who Should Use This Guide

- **Gateway Administrators**: Validating new deployments
- **Development Team**: Testing gateway changes and new features
- **Support Engineers**: Troubleshooting customer issues
- **QA Teams**: Systematic testing of VPN functionality

---

## 🚀 Getting Started

### Initial Setup
1. **Access the mobile client** at your gateway's IP on port 8081
2. **Add to Home Screen** (PWA installation) for better experience
3. **Configure Gateway URL** in Dashboard (should auto-detect)
4. **Test Connection** to verify gateway accessibility

### Basic Navigation
- **Hamburger Menu** (☰): Access all sections
- **Dashboard**: Overview and gateway status
- **6 Main Sections**: Each focused on specific testing areas

---

## 📱 Section-by-Section Guide

## 1. 📊 Dashboard
**Purpose**: Gateway connectivity overview and quick access to features

### What You See:
- **Gateway URL**: Points to your VPN gateway (e.g., `http://144.129.191.155:5000`)
- **Connection Status**: Real-time gateway connectivity
- **Feature Cards**: Quick navigation to testing sections

### Testing Workflow:
1. **Verify Gateway URL** is correct for your deployment
2. **Click "Test Connection"** - should show "Connected" 
3. **Use feature cards** to jump to specific testing areas

### Troubleshooting:
- **"Disconnected"**: Check gateway is running, firewall allows access
- **Wrong URL**: Update Gateway URL field and test again

---

## 2. 📷 QR Scanner
**Purpose**: Test QR code generation and scanning workflow that end users will experience

### Use Cases:
- **Validate QR Generation**: Ensure gateway produces scannable QR codes
- **Test Customer Workflow**: Simulate end-user configuration import
- **Debug QR Issues**: Test problematic configurations reported by users

### Testing Workflow:

#### A. Test Camera Scanning:
1. **Grant Camera Permission** when prompted (iOS Safari)
2. **Click "Start Scanning"**
3. **Point at QR codes** generated by your gateway
4. **Verify configuration parsing** and display

#### B. Test File Upload:
1. **Save QR image** from gateway endpoint page
2. **Use "Upload QR Image"** to test file-based import
3. **Validate same parsing results** as camera scan

#### C. Configuration Validation:
1. **Review scanned configuration** in text area
2. **Check "Configuration Details"** section for parsed metadata
3. **Click "Save Configuration"** to test local storage

### What to Look For:
- **Quick Recognition**: QR codes should scan within 2-3 seconds
- **Accurate Parsing**: All WireGuard fields correctly extracted
- **Error Handling**: Invalid QR codes show helpful error messages
- **Metadata Display**: Shows network type, server endpoint, allowed IPs

### Common Issues:
- **Camera Not Working**: Ensure using Safari, not Chrome/Firefox
- **QR Not Scanning**: Check lighting, hold steady, try file upload
- **Parse Errors**: Indicates QR contains invalid WireGuard configuration

---

## 3. ⚙️ Configurations
**Purpose**: Manage and test WireGuard configurations locally

### Use Cases:
- **Test Configuration Management**: Validate config storage and retrieval
- **Bulk Configuration Testing**: Work with multiple configs simultaneously
- **Configuration Validation**: Test config parsing and format checking

### Testing Workflow:

#### A. Fetch from Gateway:
1. **Authenticate first** (see Gateway API section)
2. **Click "Fetch from Gateway"**
3. **Review imported configurations** - should show all endpoints
4. **Test individual config actions**: View, Test, QR generation

#### B. Manual Configuration Testing:
1. **Click "Add Manual"**
2. **Paste test configuration** or create sample
3. **Validate parsing and storage**
4. **Test configuration actions**

### Configuration Card Actions:
- **👁️ View**: Display full configuration in modal
- **🧪 Test**: Run connectivity validation (placeholder - shows concept)
- **📱 QR**: Generate QR code for configuration
- **📋 Copy**: Copy configuration to clipboard

### What to Look For:
- **Accurate Metadata**: Network type, endpoint type, IP addresses shown correctly
- **Valid Configurations**: Only properly formatted configs are accepted
- **Storage Persistence**: Saved configs remain after page refresh
- **Action Functionality**: All buttons work and show appropriate responses

---

## 4. 🌐 Network Types
**Purpose**: Educational tool and validation of all 5 VPN network architectures

### Use Cases:
- **Architecture Understanding**: Learn about different network types
- **Feature Validation**: Ensure all network types work in your deployment
- **Customer Education**: Understand what you're offering customers

### The 5 Network Types:

#### 🌍 Secure Internet
- **Full tunnel VPN** - all traffic routed through gateway
- **Privacy focused** - hides user's real IP address
- **Use case**: General internet privacy, bypass geo-restrictions

#### 🏢 Remote Resource Gateway  
- **Split tunnel** - only specific traffic routed through VPN
- **Corporate access** - reach internal company resources
- **Use case**: Remote workers accessing company servers

#### 🔗 L3VPN Gateway
- **Site-to-site mesh** - connect multiple office locations
- **Routed connectivity** - full network-to-network access
- **Use case**: Connecting branch offices, data centers

#### 🔌 L2 Point to Point
- **Layer 2 bridging** - extend LAN across WAN
- **VLAN passthrough** - maintain VLAN tags
- **Use case**: Extending single network across locations

#### 🕸️ L2 Mesh
- **VXLAN-based** - advanced Layer 2 mesh networking
- **VLAN aware** - multiple isolated networks
- **Use case**: Complex multi-tenant networking

### Testing Workflow:
1. **Review each network type** to understand differences
2. **Test creation** of each type through gateway web interface
3. **Validate configurations** generated for each type differ appropriately
4. **Document use cases** for customer discussions

---

## 5. 🧪 Connection Testing
**Purpose**: Comprehensive automated testing of VPN connectivity and performance

### Use Cases:
- **Pre-deployment Validation**: Verify gateway works before going live
- **Performance Monitoring**: Check gateway performance over time
- **Issue Diagnosis**: Systematic testing when problems reported
- **Regression Testing**: Ensure updates don't break functionality

### Test Categories:

#### 📡 Basic Connectivity
- **Gateway Ping**: Basic reachability test
- **DNS Resolution**: Verify DNS functionality
- **HTTP/HTTPS**: Test web connectivity through VPN

#### ⚡ Performance Tests
- **Bandwidth Test**: Upload/download speed measurement
- **Latency Test**: Round-trip time analysis
- **Packet Loss**: Network reliability measurement

#### 🔒 Security Tests
- **IP Leak Detection**: Verify VPN properly masks IP
- **DNS Leak Test**: Ensure DNS queries go through VPN
- **Traffic Encryption**: Validate HTTPS functionality

#### 🔌 Gateway Integration
- **Gateway API Test**: Verify API accessibility
- **Config Validation**: Test configuration generation
- **Endpoint Status**: Check endpoint management

### Testing Workflow:
1. **Click "Run All Tests"** for comprehensive validation
2. **Monitor real-time results** as tests execute
3. **Review test summary** for pass/fail overview
4. **Investigate failures** for specific issues

### Interpreting Results:
- **✅ Green (Pass)**: Test completed successfully
- **❌ Red (Fail)**: Issue detected, requires investigation
- **⚠️ Yellow (Skip)**: Test couldn't run (e.g., authentication required)

### Best Practices:
- **Run tests after deployment** to validate functionality
- **Run tests before updates** to establish baseline
- **Run tests when issues reported** to diagnose problems
- **Document test results** for compliance/audit purposes

---

## 6. 🔌 Gateway API
**Purpose**: Direct interaction with VPN gateway management APIs

### Use Cases:
- **API Validation**: Test all gateway endpoints work correctly
- **Authentication Testing**: Verify login/session management
- **Data Retrieval**: Access gateway statistics and logs
- **Integration Testing**: Validate API responses for development

### Authentication:
1. **Enter credentials** (default: admin/kahluna123)
2. **Click Login** - should show "Logged In" status
3. **Authentication required** for most API operations

### Quick Actions:

#### 🌐 Get Networks
- **Tests**: `/api/networks` endpoint
- **Shows**: All VPN networks configured on gateway
- **Use for**: Validating network creation/management

#### 👥 Get Endpoints  
- **Tests**: `/api/endpoints` endpoint
- **Shows**: All endpoints (users/devices) configured
- **Use for**: Validating endpoint creation/management

#### 📊 Statistics
- **Tests**: `/api/statistics` endpoint  
- **Shows**: Gateway performance and usage metrics
- **Use for**: Monitoring gateway health

#### 📋 Audit Logs
- **Tests**: `/api/audit-logs` endpoint
- **Shows**: Recent administrative actions
- **Use for**: Security auditing and troubleshooting

### Testing Workflow:
1. **Authenticate first** with valid credentials
2. **Test each API endpoint** systematically
3. **Review JSON responses** for expected data
4. **Verify error handling** with invalid requests

### What to Look For:
- **Authentication Success**: Login shows "Logged In" status
- **Valid JSON Responses**: APIs return properly formatted data
- **Appropriate Data**: Responses contain expected gateway information
- **Error Handling**: Invalid requests show helpful error messages

---

## 🔄 Common Testing Workflows

## 🚀 New Gateway Deployment Validation

### Complete Testing Checklist:
1. **Dashboard**: Verify gateway connectivity
2. **Gateway API**: Test authentication and all endpoints
3. **Network Types**: Create test network of each type
4. **Configurations**: Generate and validate test configurations
5. **QR Scanner**: Test QR generation and scanning workflow
6. **Connection Testing**: Run full test suite

### Success Criteria:
- All API endpoints return valid data
- All 5 network types can be created
- QR codes generate and scan correctly
- All connectivity tests pass
- No authentication or permission errors

## 🐛 Customer Issue Investigation

### Troubleshooting Workflow:
1. **QR Scanner**: Scan customer's problematic QR code
2. **Configurations**: Validate configuration format and content
3. **Connection Testing**: Run tests to identify connectivity issues
4. **Gateway API**: Check gateway logs and statistics
5. **Document findings** for customer resolution

## 🔄 Development Testing

### Feature Validation Workflow:
1. **Gateway API**: Test new API endpoints
2. **Network Types**: Validate new network type support
3. **Configurations**: Test configuration generation changes
4. **Connection Testing**: Ensure changes don't break connectivity
5. **QR Scanner**: Test any QR generation changes

---

## 🛠️ Troubleshooting Guide

## Common Issues and Solutions:

### Gateway Connection Problems
**Symptoms**: "Disconnected" status, API failures
**Solutions**:
- Check gateway URL is correct
- Verify gateway is running on port 5000
- Check firewall allows access to gateway
- Test gateway directly in web browser

### Authentication Issues
**Symptoms**: Login fails, "Authentication required" messages
**Solutions**:
- Verify username/password (default: admin/kahluna123)
- Check if admin user exists in gateway
- Try logging in to gateway web interface directly
- Check for session timeout issues

### QR Scanner Problems
**Symptoms**: Camera not working, QR codes not scanning
**Solutions**:
- Use Safari browser (not Chrome/Firefox)
- Grant camera permission when prompted
- Ensure good lighting for scanning
- Try file upload as alternative
- Test with known-good QR codes first

### Test Failures
**Symptoms**: Connection tests show failures
**Solutions**:
- Check internet connectivity
- Verify gateway is accessible from test location
- Review specific error messages in test results
- Run tests individually to isolate issues
- Check gateway logs for corresponding errors

### Performance Issues
**Symptoms**: Slow loading, timeouts
**Solutions**:
- Check network connection to gateway
- Clear browser cache and reload
- Try accessing from different device/network
- Check gateway server resources

---

## 📝 Best Practices

### Regular Testing Schedule
- **After deployments**: Validate all functionality works
- **Before updates**: Establish baseline performance
- **Weekly monitoring**: Run automated test suite
- **Issue investigation**: Systematic troubleshooting approach

### Documentation
- **Record test results** for compliance/audit
- **Document configuration standards** for consistency
- **Track performance trends** over time
- **Maintain troubleshooting logs** for common issues

### Security Considerations
- **Use test credentials** only in testing environments
- **Don't save production credentials** in mobile client
- **Test authentication regularly** to ensure security
- **Monitor audit logs** for suspicious activity

---

## 📞 Support and Resources

### When to Use This Tool
- ✅ Testing gateway functionality
- ✅ Validating deployments
- ✅ Troubleshooting issues
- ✅ Development/QA validation

### When NOT to Use This Tool  
- ❌ Daily VPN usage (use standard WireGuard apps)
- ❌ Production network management (use gateway web interface)
- ❌ Customer onboarding (customers use WireGuard apps)

### Additional Resources
- **Gateway Documentation**: Main project README.md
- **API Reference**: Gateway `/api/` endpoints
- **WireGuard Documentation**: [wireguard.com](https://www.wireguard.com/)
- **Support Issues**: Use GitHub issues for bug reports

---

This User Guide should help you effectively use the mobile testing client to validate your KahLuna WARP VPN Gateway deployment and troubleshoot any issues that arise.